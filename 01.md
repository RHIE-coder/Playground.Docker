# :dart: 컨테이너 인프라 환경 개요

## :lock: 아키텍처 특징

### :key: `모놀리식 아키텍처`
 - 모든 기능이 합쳐져 있는 어플리케이션 및 서비스

### :key: `마이크로서비스 아키텍처(MSA)`
 - 독립된 서비스를 구성, 각 서비스는 독립적으로 동작. 
 - 재사용 높음, 확장성 높음, 즉각적인 요구 사항 대응 가능
 - API 게이트웨이와 이벤트 버스로 유기적으로 통신(내부 통신을 이벤트로 일원화)하여 복잡도가 높고 호출 횟수 증가로 성능에 영향
 - 서비스 개수는 유동적. 어떤 서비스가 등록되어 있는지 파악하기 위해 서비스 디스커버리를 사용

## :lock: 컨테이너 인프라 환경?
 - 컨테이너 중심으로 구성된 인프라 환경. 리눅스 운영체제의 커널 하나에서 여러 개의 컨테이너가 격리된 상태로 실행되는 인프라 환경
 - 컨테이너 : 다른 프로세스에 영향을 받지않고 독립적으로 실행되는 프로세스 상태를 의미
 
### :key: 구성
 - 컨테이너
 - 컨테이너 관리
 - 개발 환경 구성 및 배포 자동화
 - 모니터링

### :key: 주요 도구

#### - Docker
컨테이너 환경에서 독립적으로 어플리케이션을 실행할 수 있도록 컨테이너를 만들어주고 관리해줌. 운영 체제 환경과 관계없이 독립적인 환경에서 일관된 결과 보장
 - 비슷한 도구로 `Containerd`, `CRI-O`, `Podman` 등이 있음

#### - Kubernetes

다수의 컨테이너를 관리하는데 사용. 자동 배포, 배포된 컨테이너에 대한 동작 보증. 부하에 따른 동적 확장 등의 기능 제공

처음에는 다수의 컨테이너만 관리하는 도구였지만 지금은 컨테이너 인프라에 필요한 기능을 통합하고 관리하는 솔루션으로 발전
 - 비슷한 도구로 `Docker Swarm`, `Mesos`, `Nomad` 등이 있음

#### - Jenkins

지속적인 통합(Continuous Integration, CI)과 지속적인 배포(Continuous Deployment)를 지원

빌드, 테스트, 패키지화, 배포 단계를 모두 자동화해 개발 단계를 표준화함

 - 비슷한 도구로 `Bamboo`, `Github Action`, `Teamcity` 등이 있음

#### - Prometheus & Grafana

모니터링을 위한 도구. 수많은 종류의 소규모 기능이 각각 나누어 개발되기에 중앙 모니터링이 필요.

프로메테우스는 상태 데이터를 수집, 그라파나는 프로메테우스로 수집한 데이터를 관리자가 보기 좋게 시각화

 - 비슷한 `모니터링 데이터 수집 도구`로 `DataDog`, `InfluxDB`, `New Relic` 등이 있음
 - 비슷한 `데이터 시각화 도구`로 `Kibana`, `Chronograf` 등이 있음(`Kibana`와 시장을 양분화함. But 프로메테우스와의 간결한 연결로는 `Grafana`를 선호)


<hr>

# :dart: 테스트 환경 구축 예시

### :lock: VirtualBox & Vagrant 설치

베이그런트는 가상화 소프트웨어인 버추얼박스와 호환성이 매우 좋다.

베이그런트는 사용자의 요구에 맞게 시스템 자원을 할당, 배치, 배포해 두었다가 필요할 때 시스템을 사용할 수 있는 상태로 만들어 준다(Provisioning). 즉, 필요할 때 황경을 빠르고 쉽게 구현.

코드형 인프라(IaC, Infrastructure as Code) 구축 with Vagrant



